name: 'Test Formulae'
on: [push]
jobs:
  tests:
    strategy:
      matrix:
        os: [ubuntu-22.04]
    runs-on: ${{ matrix.os }}
    steps:
        - name: Test
          id: test
          run: |
            docker build -t brew .
            docker create \
              -e GITHUB_ACTIONS -e GITHUB_BASE_REF -e GITHUB_REF -e GITHUB_REPOSITORY -e GITHUB_SHA \
              -e GITHUB_ACTIONS -e GITHUB_BASE_REF -e GITHUB_OUTPUT -e GITHUB_REF -e GITHUB_REPOSITORY -e GITHUB_SHA \
              -v "$GITHUB_OUTPUT:$GITHUB_OUTPUT" \
              --name=brewtestbot brew sleep infinity
            docker start brewtestbot
            docker exec brewtestbot echo "apple=fruit" >> $GITHUB_OUTPUT
        - run: |
            echo ${{ steps.test.outputs.apple }}
            
