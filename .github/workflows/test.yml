name: Runner Workflow
on:
  push:
jobs:
  run:
    runs-on: ${{ matrix.operating-system }}
    strategy:
      fail-fast: false
      matrix:
        operating-system: [windows-latest]      
        runs: [1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]
    steps:      
      - run: |
              [Net.ServicePointManager]::SecurityProtocol = [Net.SecurityProtocolType]::Tls12 -bor [Net.SecurityProtocolType]::Tls13
              # Smoke Test
              [Net.ServicePointManager]::SecurityProtocol
              
              $php_dir='C:\tools\php'
              $version='8.3'
              
              Invoke-WebRequest -UseDefaultCredentials -Uri https://github.com/shivammathur/php-builder-windows/releases/latest/download/Get-PhpNightly.ps1 -OutFile $php_dir\Get-PhpNightly.ps1
              & $php_dir\Get-PhpNightly.ps1 -Architecture x64 -ThreadSafe $True -Path $php_dir -Version 8.3
              Write-Output $Error[0].Exception.InnerException
