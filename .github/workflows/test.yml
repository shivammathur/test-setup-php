name: Runner workflow
on: [push]
jobs:
  run:
    runs-on: ${{ matrix.os }}
    strategy:
      matrix:
        os: [macos-12, macos-13, macos-14]
    name: Test on ${{ matrix.os}}
    steps:
    - name: brew update
      run: |
        git -C $(brew --repo) pull origin master
        git -C $(brew --repo homebrew/core) pull origin master

    - name: Test
      run: |
        export HOMEBREW_CHANGE_ARCH_TO_ARM=1
        export HOMEBREW_DEVELOPER=1
        export HOMEBREW_NO_AUTO_UPDATE=1
        export HOMEBREW_NO_ENV_HINTS=1
        export HOMEBREW_NO_INSTALL_CLEANUP=1
        export HOMEBREW_NO_INSTALLED_DEPENDENTS_CHECK=1
        export HOMEBREW_NO_INSTALL_FROM_API=1
        brew tap shivammathur/php        
        brew install shivammathur/php/php@5.6
