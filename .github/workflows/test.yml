name: Test
on:
  push:
jobs:
  runner:
    strategy:
      fail-fast: false
      matrix:
        operating-system: [ubuntu-20.04, ubuntu-22.04]
        php: [7.4, '8.0', 8.1, 8.2, 8.3, 8.4]
        debug: [true, false]
        phpts: [ts, nts]
    name: Test
    runs-on: ${{ matrix.operating-system }}
    steps:
    - uses: shivammathur/setup-php@v2
      with:
        php-version: 8.3
        extensions: mongodb
      env:
        phpts: ${{ matrix.phpts }}
        debug: ${{ matrix.debug }}
    - run: |
        php -r "if(phpversion('mongodb') !== '1.17.0') { echo phpversion('mongodb') . PHP_EOL; throw new Exception('Wrong mongodb version'); }"
        php -v
        php -m
