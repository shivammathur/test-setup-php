name: Test workflow
on: [push]
jobs:
  run:
    strategy:
      fail-fast: false
      matrix:
        php: ['8.4']
        ext: [amqp, apcu, ast, couchbase, ds, event, expect, gearman, gnupg, grpc, igbinary, imagick, imap, mcrypt, memcache, memcached, mongodb, msgpack, pdo_sqlsrv, pecl_http, protobuf, psr, raphf, rdkafka, redis, sqlsrv, snmp, ssh2, swoole, v8js, uuid, vips, yaml, xlswriter, zmq, pcov]
    runs-on: macos-latest
    steps:
      - name: Setup PHP
        uses: shivammathur/setup-php@verbose
        with:
          php-version: ${{ matrix.php }}
          extensions: ${{ matrix.ext }}
      - name: Testing Extensions
        run: |
          php -v
          php -m
          php -r "if(! extension_loaded('${{ matrix.ext }}')) {throw new Exception('${{ matrix.ext }} not found');}" 
