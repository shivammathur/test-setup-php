name: 'Test Formulae'
on: [push]
jobs:
  tests:
    strategy:
      matrix:
        os: [ubuntu-22.04, ubuntu-20.04]
    runs-on: ${{ matrix.os }}
    steps:
      - name: Setup PHP and install extensions
        uses: shivammathur/setup-php@2.22.0
        with:
          php-version: 8.0
          extensions: redis, sockets, igbinary, zip, intl, libxml, soap, oauth, mcrypt
          
      - name: Setup PEAR extensions
        run: |
          pear channel-update pear.php.net
          pear install Auth
          pear install Mail
          pear install Net_Curl
          pear install XML_Parser
          pear install XML_Serializer-0.21.0
          pear install Mail_Mim
      - uses: mxschmitt/action-tmate@v3    
      - run: |
          php -v
          php -m
