name: 'Test Formulae'
on: ['push']
jobs:
  run:    
    runs-on: ${{ matrix.operating-system }}
    strategy:
      fail-fast: false
      matrix:      
        operating-system: [macos-14, macos-13, macos-12]
    name: Test
    steps:
    
    - run: |
        set -x
        git -C $(brew --repo) fetch origin master
        git -C $(brew --repo) reset --hard origin/master
        brew install --force --overwrite \
          pkg-config \
          autoconf \
          bison \
          re2c
        brew install --force --overwrite \
          openssl@1.1 \
          curl \
          krb5 \
          bzip2 \
          enchant \
          libffi \
          libpng \
          webp \
          freetype \
          intltool \
          icu4c \
          libiconv \
          zlib \
          t1lib \
          gd \
          libzip \
          gmp \
          tidy-html5 \
          libxml2 \
          libjpeg \
          libsodium \
          libxslt \
          postgresql
        brew link icu4c gettext --force --overwrite
